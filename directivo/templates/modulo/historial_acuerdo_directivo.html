{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Historial de Acuerdos</title>
    <link rel="stylesheet" href="{% static 'css/modulo.css' %}">
</head>
<body>
<h1>Historial de Acuerdos Directivo</h1>

<!-- Opcional: filtro por pendiente -->
<form method="get">
    <label for="pendiente">Mostrar solo pendientes:</label>
    <input type="checkbox" name="pendiente" id="pendiente" value="1" {% if request.GET.pendiente %}checked{% endif %}>
    <button type="submit">Filtrar</button>
</form>

<table id="tabla-historial">
    <thead>
        <tr>
            <th>#</th>
            <th>Unidad</th>
            <th>Acuerdo</th>
            <th>Unidad Parada</th>
            <th>Fecha Límite</th>
            <th>Pendiente</th>
            <th>Responsable</th>
            <th>% Avance</th>
            <th>Fecha Creación</th>
        </tr>
    </thead>
    <tbody>
        {% for acuerdo in acuerdos %}
        <tr>
            <td>{{ acuerdo.numerador }}</td>
            <td>{{ acuerdo.unidad }}</td>
            <td>{{ acuerdo.acuerdo }}</td>
            <td>{% if acuerdo.unidad_parada %}Sí{% else %}No{% endif %}</td>
            <td>{{ acuerdo.fecha_limite|date:"d/m/Y" }}</td>
            <td>{% if acuerdo.pendiente %}Sí{% else %}No{% endif %}</td>
            <td>{{ acuerdo.responsable.nombre_completo }} - {{ acuerdo.responsable.puesto }}</td>
            <td>{{ acuerdo.porcentaje_avance }}%</td>
            <td>{{ acuerdo.fecha_creacion|date:"d/m/Y H:i" }}</td>
        </tr>
        {% empty %}
        <tr>
            <td colspan="9">No hay acuerdos registrados.</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

</body>
</html>
