<div class="integrantes">
  <h2>Seleccionar integrantes</h2>

  <!-- Buscador -->
  <form method="get" class="buscador-form">
    <input 
      type="text" 
      name="q" 
      placeholder="Buscar integrante..." 
      value="{{ request.GET.q }}" 
      class="input-text"
    >
    <button type="submit" class="btn">Buscar</button>
  </form>

  <!-- Lista de integrantes con selección múltiple -->
  <form id="seleccionForm" class="seleccion-form">
    <label for="integrantesSelect">Lista de integrantes:</label>
    <select id="integrantesSelect" multiple size="10" class="select-multiple">
      {% for integrante in integrantes %}
        <option value="{{ integrante.id }}">
          {{ integrante.nombre_completo }} - {{ integrante.puesto }} ({{ integrante.area.nombre }})
        </option>
      {% empty %}
        <option disabled>No hay integrantes disponibles</option>
      {% endfor %}
    </select>
    <br>
    <button type="button" id="agregarSeleccionados" class="btn-secundario">Agregar a seleccionados</button>
  </form>

  <!-- Formulario para agregar un integrante -->
  <h3>Agregar integrante</h3>
  <form method="post" class="agregar-form">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit" name="agregar_integrante" class="btn">Agregar</button>
  </form>

  <!-- Lista de integrantes seleccionados -->
  <h3>Integrantes seleccionados</h3>
  <ul id="listaSeleccionados" class="lista-seleccionados">
    {% for integrante in seleccionados %}
      <li data-id="{{ integrante.id }}">
        {{ integrante.nombre_completo }} - {{ integrante.puesto }} 
        <button class="eliminarBtn btn-eliminar" type="button">Eliminar</button>
      </li>
    {% empty %}
      <!-- Este li se controla con JS -->
      <li id="mensajeVacio">.....</li>
    {% endfor %}
  </ul>
</div>
