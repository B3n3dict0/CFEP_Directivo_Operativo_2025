{% load static %}

<section class="desarrollo">
  <h2>INFORMACI칍N</h2>

  <div class="secciones-grid">
    <!-- 1. PRODUCCI칍N -->
    <div class="seccion-item">
      <h3>1. PRODUCCI칍N <span class="tiempo">6 MIN</span></h3>
      <button onclick="mostrarFormulario('produccion')">Agregar Nota</button>
      <div id="notas-produccion">
        {% for nota in notas %}
          {% if nota.apartado == 'produccion' %}
            <div class="nota-item">
              <span>{{ nota.texto }} ({{ nota.fecha_creacion|date:"d/m/Y H:i" }})</span>
              <a href="{% url 'editar_nota' nota.id %}" class="btn-editar">Editar</a>
            </div>
          {% endif %}
        {% endfor %}
        <div id="notas-temporales-produccion"></div>
      </div>
      <ul>
        <li>ESTADO DE LAS UNIDADES</li>
        <li>SEGUIMIENTO A REGIMEN T칄RMICO DE LAS UNIDADES (solo para centrales termoelectricas)</li>
        <li>Avisos de atenci칩n inmediata del 치rea de operaci칩n</li>
        <li>Avisos de atenci칩n inmediata del 치rea qu칤mica (solo para centrales que cuentan con esta 치rea)</li>
        <li>Maniobras con riesgo para la operaci칩n de las unidades</li>
      </ul>
    </div>

    <!-- 2. MANTENIMIENTO -->
    <div class="seccion-item">
      <h3>2. MANTENIMIENTO <span class="tiempo">2 MIN</span></h3>
      <button onclick="mostrarFormulario('mantenimiento')">Agregar Nota</button>
      <div id="notas-mantenimiento">
        {% for nota in notas %}
          {% if nota.apartado == 'mantenimiento' %}
            <div class="nota-item">
              <span>{{ nota.texto }} ({{ nota.fecha_creacion|date:"d/m/Y H:i" }})</span>
              <a href="{% url 'editar_nota' nota.id %}" class="btn-editar">Editar</a>
            </div>
          {% endif %}
        {% endfor %}
        <div id="notas-temporales-mantenimiento"></div>
      </div>
      <ul>
        <li>Seguimiento de actividades que originaron salida o decremento de la unidad</li>
        <li>Avance del proyecto de mantenimiento en proceso y su problem치tica</li>
        <li>Avisos de atenci칩n inmediata de mantenimiento predictivo</li>
        <li>Actividades de mantenimiento con riesgo</li>
      </ul>
    </div>

    <!-- 3. SEGURIDAD Y AMBIENTAL -->
    <div class="seccion-item">
      <h3>3. SEGURIDAD Y AMBIENTAL <span class="tiempo">3 MIN</span></h3>
      <button onclick="mostrarFormulario('seguridad')">Agregar Nota</button>
      <div id="notas-seguridad">
        {% for nota in notas %}
          {% if nota.apartado == 'seguridad' %}
            <div class="nota-item">
              <span>{{ nota.texto }} ({{ nota.fecha_creacion|date:"d/m/Y H:i" }})</span>
              <a href="{% url 'editar_nota' nota.id %}" class="btn-editar">Editar</a>
            </div>
          {% endif %}
        {% endfor %}
        <div id="notas-temporales-seguridad"></div>
      </div>
      <ul>
        <li>Avisos de atenci칩n inmediata relacionados con aspectos de seguridad</li>
        <li>EVENTOS QUE AFECTEN O PUEDAN AFECTAR LAS CONDICIONES DE SEGURIDAD DE LA CENTRAL</li>
        <li>EVENTOS QUE AFECTEN O PUEDAN AFECTAR LAS CONDICIONES AMBIENTALES DE LA CENTRAL</li>
      </ul>
    </div>

    <!-- 4. REVISI칍N DE ACUERDOS ANTERIORES -->
    <div class="seccion-item">
      <h3>4. REVISI칍N DE ACUERDOS ANTERIORES <span class="tiempo">2 MIN</span></h3>
      <a href="{% url 'historial_acuerdo_operativo' %}">Ir a p치gina</a>
    </div>

    <!-- 5. CREACI칍N DE ACUERDOS NUEVOS -->
    <div class="seccion-item">
      <h3>5. CREACI칍N DE ACUERDOS NUEVOS <span class="tiempo">1 MIN</span></h3>
      <a href="{% url 'crear_acuerdo_operativo' %}" target="_blank">Ir a p치gina</a>
    </div>

    <!-- 6. SUPERINTENDENCIA GENERAL -->
    <div class="seccion-item">
      <h3>6. SUPERINTENDENCIA GENERAL <span class="tiempo">1 MIN</span></h3>
      <button onclick="mostrarFormulario('superintendencia')">Agregar Nota</button>
      <div id="notas-superintendencia">
        {% for nota in notas %}
          {% if nota.apartado == 'superintendencia' %}
            <div class="nota-item">
              <span>{{ nota.texto }} ({{ nota.fecha_creacion|date:"d/m/Y H:i" }})</span>
              <a href="{% url 'editar_nota' nota.id %}" class="btn-editar">Editar</a>
            </div>
          {% endif %}
        {% endfor %}
        <div id="notas-temporales-superintendencia"></div>
      </div>
      <p>RATIFICACI칍N DE LAS ACTIVIDADES PRIORITARIAS DEL D칈A</p>
    </div>
  </div>
</section>

<!-- Overlay para modal -->
<div id="overlay-nota"></div>

<!-- Formulario modal -->
<div id="formulario-nota">
  <h4>Agregar Nota</h4>
  <form id="form-temporal" onsubmit="return agregarNotaTemporal();">
    <input type="hidden" id="id_apartado" name="apartado">
    <textarea id="texto_nota" rows="3" placeholder="Escribe tu nota aqu칤..."></textarea>
    <div style="text-align: right; margin-top: 8px;">
      <button type="submit" class="btn btn-guardar">Guardar</button>
      <button type="button" class="btn btn-cerrar" onclick="cerrarFormulario()">Cerrar</button>
    </div>
  </form>
</div>

<!-- Bot칩n general -->
<form id="guardar-todo-form" data-url="{% url 'guardar_todo' %}">
  {% csrf_token %}
  <button type="submit">Guardar notas</button>
</form>

<section class="seccion-descarga">
  <div class="tarjeta-descarga">
    <div class="icono-descarga">游닌</div>
    <h3>Descargar Formato</h3>
    <p>Accede al historial completo de notas</p>
    <a href="{% url 'historial_notas' %}" class="btn-descarga">
      Ver Historial
    </a>
  </div>
</section>